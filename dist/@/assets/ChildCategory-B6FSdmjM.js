import{t as R,r as c,S as O,f as U,j as e,L as k,d as s}from"./index-CMwVzeIB.js";import{u as H,h as V,b as $,F as q,a as z}from"./Layout-BjD68e0c.js";import{a as G}from"./CategoryTable-WR4eEsiG.js";import{B as J}from"./BulkActionDrawer-Dt663Ar_.js";import{C as K}from"./ShowHideButton-BYPQhCd6.js";import{D as Q}from"./EditDeleteButton-CYYmh68G.js";import{L as W}from"./Loading-BaAIO2Yr.js";import{N as X}from"./Tooltip-CK2c9wXD.js";import{P as Y}from"./PageTitle-CiYCa1gH.js";import{u as Z}from"./useAsync-3D9_nwwI.js";import{u as ee}from"./useFilter-CzeXV83K.js";import{u as se}from"./DrawerButton-ORFdy47n.js";import{C as te}from"./ProductServices-BvNfP5wu.js";import{A as re}from"./AnimatedContent-BUFKB-yB.js";import"./iconBase-E_75oB0f.js";import"./useDispatch-DX3rZxrl.js";import"./httpService-y4n1pDxN.js";import"./SpecificationServices-DpSQCShk.js";import"./toast-Bi8odYBa.js";/* empty css                      */import"./index.esm-COT8LWOL.js";import"./InputArea-Bkb2-nDq.js";import"./LabelArea-DxplvXvq.js";import"./SwitchToggle-B5l6JUS2.js";import"./index.prod-bp3Z4JqG.js";import"./Uploader-o_DGVQLp.js";import"./tslib.es6-RU1n5ZxP.js";import"./index-DJ3uWcwx.js";import"./BrandServices-Jo5NrGFc.js";import"./index--KU_TfxA.js";import"./ParentCategory-CmfVHEj-.js";import"./CurrencyServices-DcYd_dUH.js";import"./LanguageServices-BvaG6nfs.js";import"./spinner-CkndCogW.js";import"./AdminServices-D9Q4xkaE.js";import"./react-tooltip.min-DdxQKMRK.js";import"./browser-G6HRTwGe.js";import"./isToday-tsJAS3Ca.js";import"./SelectLanguageTwo-BgAeF8hI.js";const $e=()=>{const{id:n}=R(),[d,A]=c.useState([]),[g,v]=c.useState([]),[j,P]=c.useState(!1),[m,x]=c.useState([]),{toggleDrawer:F,lang:b}=c.useContext(O),{handleDeleteMany:S,allId:T,handleUpdateMany:D}=se(),{data:h,loading:p,error:N}=Z(te.getAllCategory),{showingTranslateValue:B}=H(),{t:r}=U();c.useEffect(()=>{var w,y;const a=(t,l,o=[])=>{for(let i of l){if(i._id===t)return o.concat(i);const f=a(t,i==null?void 0:i.children,o==null?void 0:o.concat(i));if(f)return f}},u=(t,l)=>{var o;return t._id===l?t:(o=t==null?void 0:t.children)==null?void 0:o.reduce((i,f)=>i??u(f,l),void 0)};if(!p){console.log("idid",n);let t={};h.forEach(i=>{i._id===n&&(t=i)}),console.log("selectedDataObj",t);const l=u(t,n),o=a(n,(w=h[0])==null?void 0:w.children);((y=l==null?void 0:l.children)==null?void 0:y.length)>0&&(A(l==null?void 0:l.children),v(o))}},[n,p,h,d]);const{totalResults:I,resultsPerPage:E,dataTable:_,serviceData:C,handleChangePage:L}=ee(d),M=()=>{P(!j),x(d==null?void 0:d.map(a=>a._id)),j&&x([])};return e.jsxs(e.Fragment,{children:[e.jsx(Y,{children:r("CategoryPageTitle")}),e.jsx(Q,{ids:T,setIsCheck:x,category:!0}),e.jsx(J,{ids:T,title:"Child Categories",lang:b,data:h,childId:n}),e.jsxs(re,{children:[e.jsx("div",{className:"flex items-center pb-4",children:e.jsxs("ol",{className:"flex items-center w-full overflow-hidden font-serif",children:[e.jsx("li",{className:"text-sm pr-1 transition duration-200 ease-in cursor-pointer hover:text-blue-500 font-semibold",children:e.jsx(k,{to:"/categories",children:r("Categories")})}),g==null?void 0:g.map((a,u)=>e.jsxs("span",{className:"flex items-center font-serif",children:[e.jsxs("li",{className:"text-sm mt-[1px]",children:[" ",e.jsx(V,{})," "]}),e.jsx("li",{className:"text-sm pl-1 transition duration-200 ease-in cursor-pointer text-blue-700 hover:text-blue-500 font-semibold ",children:e.jsx(k,{to:`/categories/${a._id}`,children:B(a==null?void 0:a.name)})})]},u+1))]})}),e.jsx(s.Card,{className:"min-w-0 shadow-xs overflow-hidden bg-white dark:bg-gray-800 mb-5",children:e.jsx(s.CardBody,{children:e.jsxs("div",{className:"flex justify-end items-end",children:[e.jsxs(s.Button,{onClick:F,className:"rounded-md h-12",children:[e.jsx("span",{className:"mr-3",children:e.jsx($,{})}),r("AddCategory")]}),e.jsx("div",{className:"ml-3 w-full md:w-24 lg:w-24 xl:w-24",children:e.jsxs(s.Button,{disabled:m.length<1,onClick:()=>D(m),className:"w-full rounded-md h-12",children:[e.jsx(q,{}),r("BulkAction")]})}),e.jsxs(s.Button,{disabled:m.length<1,onClick:()=>S(m),className:"ml-3 rounded-md h-12 bg-red-500",children:[e.jsx("span",{className:"mr-3",children:e.jsx(z,{})}),r("Delete")]})]})})})]}),p?e.jsx(W,{loading:p}):N?e.jsx("span",{className:"text-center mx-auto text-red-500",children:N}):(C==null?void 0:C.length)!==0?e.jsxs(s.TableContainer,{className:"mb-8",children:[e.jsxs(s.Table,{children:[e.jsx(s.TableHeader,{children:e.jsxs("tr",{children:[e.jsx(s.TableCell,{children:e.jsx(K,{type:"checkbox",name:"selectAll",id:"selectAll",handleClick:M,isChecked:j})}),e.jsx(s.TableCell,{children:r("catIdTbl")}),e.jsx(s.TableCell,{children:r("catIconTbl")}),e.jsx(s.TableCell,{children:r("Name")}),e.jsx(s.TableCell,{children:r("Description")}),e.jsx(s.TableCell,{className:"text-center",children:r("catPublishedTbl")}),e.jsx(s.TableCell,{className:"text-right",children:r("catActionsTbl")})]})}),e.jsx(G,{categories:_,data:h,lang:b,isCheck:m,setIsCheck:x,useParamId:n})]}),e.jsx(s.TableFooter,{children:e.jsx(s.Pagination,{totalResults:I,resultsPerPage:E,onChange:L,label:"Table navigation"})})]}):e.jsx(X,{title:"Sorry, There are no categories right now."})]})};export{$e as default};
